{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Oblivion\\\\dummy\\\\Filmpire\\\\src\\\\components\\\\NavBar\\\\NavBar.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AppBar, IconButton, Toolbar, Drawer, Button, Avatar, useMediaQuery } from '@mui/material';\nimport { Menu, AccountCircle, Brightness4, Brightness7 } from '@mui/icons-material';\nimport { NavLink } from 'react-router-dom';\nimport { useTheme } from '@mui/material/styles';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setUser, userSelector } from '../../features/auth';\nimport useStyles from './styles';\nimport { Sidebar, Search } from '..';\nimport { fetchToken, createSessionId, moviesApi } from '../../utils';\nimport { ColorModeContext } from '../../utils/ToggleColoMode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst NavBar = () => {\n  _s();\n\n  var _user$avatar, _user$avatar$tmdb;\n\n  const classes = useStyles();\n  const isMobile = useMediaQuery('(max-width:600px)');\n  const theme = useTheme();\n  const [mobileOpen, setMobileOpen] = useState(false);\n  const dispatch = useDispatch();\n  const {\n    isAuthenticated,\n    user\n  } = useSelector(userSelector);\n  const token = localStorage.getItem('request_token');\n  const sessionIdFromLocalStorage = localStorage.getItem('session_id');\n  const colorMode = useContext(ColorModeContext);\n  useEffect(() => {\n    const logInUser = async () => {\n      if (token) {\n        if (sessionIdFromLocalStorage) {\n          const {\n            data: userData\n          } = await moviesApi.get(`/account?session_id=${sessionIdFromLocalStorage}`);\n          dispatch(setUser(userData));\n        } else {\n          const sessionId = await createSessionId();\n          const {\n            data: userData\n          } = await moviesApi.get(`/account?session_id=${sessionId}`);\n          dispatch(setUser(userData));\n        }\n      }\n    };\n\n    logInUser();\n  }, [token]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"fixed\",\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        className: classes.toolbar,\n        children: [isMobile && /*#__PURE__*/_jsxDEV(IconButton, {\n          color: \"inherit\",\n          edge: \"start\",\n          style: {\n            outline: 'none'\n          },\n          onClick: () => setMobileOpen(prevMobileOpen => !prevMobileOpen),\n          className: classes.menuButton,\n          children: /*#__PURE__*/_jsxDEV(Menu, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n          color: \"inherit\",\n          sx: {\n            ml: 1\n          },\n          onClick: colorMode.toggleColorMode,\n          children: theme.palette.mode === 'dark' ? /*#__PURE__*/_jsxDEV(Brightness7, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 47\n          }, this) : /*#__PURE__*/_jsxDEV(Brightness4, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 77\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), !isMobile && /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: !isAuthenticated ? /*#__PURE__*/_jsxDEV(Button, {\n            color: \"inherit\",\n            onClick: fetchToken,\n            children: [\"Login \\xA0 \", /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 69,\n              columnNumber: 30\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Button, {\n            color: \"inherit\",\n            component: NavLink,\n            to: `/profile/${user.id}`,\n            className: classes.linkButton,\n            onClick: () => {},\n            children: [!isMobile && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: \"My Movies \\xA0\"\n            }, void 0, false), /*#__PURE__*/_jsxDEV(Avatar, {\n              style: {\n                width: 30,\n                height: 30\n              },\n              alt: \"Profile\",\n              src: `https://www.themoviedb.org/t/p/w64_and_h64_face${user === null || user === void 0 ? void 0 : (_user$avatar = user.avatar) === null || _user$avatar === void 0 ? void 0 : (_user$avatar$tmdb = _user$avatar.tmdb) === null || _user$avatar$tmdb === void 0 ? void 0 : _user$avatar$tmdb.avatar_path}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), isMobile && /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        className: classes.drawer,\n        children: isMobile ? /*#__PURE__*/_jsxDEV(Drawer, {\n          variant: \"temporary\",\n          anchor: \"right\",\n          open: mobileOpen,\n          onClose: () => setMobileOpen(prevMobileOpen => !prevMobileOpen),\n          classes: {\n            paper: classes.drawerPaper\n          },\n          ModalProps: {\n            keepMounted: true\n          },\n          children: /*#__PURE__*/_jsxDEV(Sidebar, {\n            setMobileOpen: setMobileOpen\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(Drawer, {\n          classes: {\n            paper: classes.drawerPaper\n          },\n          variant: \"permanent\",\n          open: true,\n          children: /*#__PURE__*/_jsxDEV(Sidebar, {\n            setMobileOpen: setMobileOpen\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(NavBar, \"fku/7BH367b8KJ0bKZEkAaVeYWE=\", false, function () {\n  return [useStyles, useMediaQuery, useTheme, useDispatch, useSelector];\n});\n\n_c = NavBar;\nexport default NavBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"NavBar\");","map":{"version":3,"names":["React","useState","useEffect","useContext","AppBar","IconButton","Toolbar","Drawer","Button","Avatar","useMediaQuery","Menu","AccountCircle","Brightness4","Brightness7","NavLink","useTheme","useDispatch","useSelector","setUser","userSelector","useStyles","Sidebar","Search","fetchToken","createSessionId","moviesApi","ColorModeContext","NavBar","classes","isMobile","theme","mobileOpen","setMobileOpen","dispatch","isAuthenticated","user","token","localStorage","getItem","sessionIdFromLocalStorage","colorMode","logInUser","data","userData","get","sessionId","toolbar","outline","prevMobileOpen","menuButton","ml","toggleColorMode","palette","mode","id","linkButton","width","height","avatar","tmdb","avatar_path","drawer","paper","drawerPaper","keepMounted"],"sources":["C:/Users/Oblivion/dummy/Filmpire/src/components/NavBar/NavBar.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { AppBar, IconButton, Toolbar, Drawer, Button, Avatar, useMediaQuery } from '@mui/material';\r\nimport { Menu, AccountCircle, Brightness4, Brightness7 } from '@mui/icons-material';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useTheme } from '@mui/material/styles';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { setUser, userSelector } from '../../features/auth';\r\nimport useStyles from './styles';\r\nimport { Sidebar, Search } from '..';\r\nimport { fetchToken, createSessionId, moviesApi } from '../../utils';\r\nimport { ColorModeContext } from '../../utils/ToggleColoMode';\r\n\r\nconst NavBar = () => {\r\n  const classes = useStyles();\r\n  const isMobile = useMediaQuery('(max-width:600px)');\r\n  const theme = useTheme();\r\n  const [mobileOpen, setMobileOpen] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n  const { isAuthenticated, user } = useSelector(userSelector);\r\n  \r\n  const token = localStorage.getItem('request_token');\r\n  const sessionIdFromLocalStorage = localStorage.getItem('session_id');\r\n\r\n  const colorMode = useContext(ColorModeContext);\r\n\r\n  useEffect(() => {\r\n    const logInUser = async () => {\r\n      if (token) {\r\n        if (sessionIdFromLocalStorage){\r\n          const { data: userData } = await moviesApi.get(`/account?session_id=${sessionIdFromLocalStorage}`);\r\n          dispatch(setUser(userData));\r\n        } else {\r\n          const sessionId = await createSessionId();\r\n          const { data: userData } = await moviesApi.get(`/account?session_id=${sessionId}`);\r\n          dispatch(setUser(userData));\r\n        }\r\n      }\r\n    }\r\n\r\n    logInUser();\r\n\r\n  }, [token])\r\n  \r\n\r\n   return (\r\n    <>\r\n      <AppBar position='fixed'>\r\n        <Toolbar className={classes.toolbar}>\r\n          { isMobile && (\r\n            <IconButton \r\n              color='inherit' \r\n              edge='start' \r\n              style={{ outline: 'none' }}\r\n              onClick={()=>setMobileOpen((prevMobileOpen) => !prevMobileOpen)}\r\n              className={classes.menuButton}\r\n              >\r\n              <Menu></Menu>\r\n            </IconButton>\r\n          )}\r\n          <IconButton color='inherit' sx={{ ml: 1 }} onClick={colorMode.toggleColorMode}>\r\n            { theme.palette.mode === 'dark' ? <Brightness7></Brightness7> : <Brightness4></Brightness4> }\r\n          </IconButton>\r\n          { !isMobile && <Search></Search> }\r\n          <div>\r\n            {!isAuthenticated ? (\r\n              <Button color='inherit' onClick={fetchToken}>\r\n                Login &nbsp; <AccountCircle></AccountCircle>\r\n              </Button>\r\n            ) : (\r\n              <Button color='inherit' \r\n                component={NavLink} to={`/profile/${user.id}`}\r\n                className={classes.linkButton} onClick={()=>{}}\r\n              >\r\n                {!isMobile && <>My Movies &nbsp;</>}\r\n                <Avatar\r\n                  style={{ width:30, height:30 }}\r\n                  alt='Profile'\r\n                  src={`https://www.themoviedb.org/t/p/w64_and_h64_face${user?.avatar?.tmdb?.avatar_path}`}\r\n                />\r\n              </Button>\r\n            )}\r\n          </div>\r\n          { isMobile && <Search></Search> }\r\n        </Toolbar>\r\n      </AppBar>\r\n      <div>\r\n        <nav className={classes.drawer}>\r\n          { isMobile ? (\r\n            <Drawer\r\n              variant='temporary'\r\n              anchor='right'\r\n              open={ mobileOpen }\r\n              onClose={()=>setMobileOpen((prevMobileOpen) => !prevMobileOpen)}\r\n              classes={{ paper: classes.drawerPaper }}\r\n              ModalProps={{ keepMounted: true}}\r\n            >\r\n              <Sidebar setMobileOpen={setMobileOpen}></Sidebar>\r\n            </Drawer>\r\n          ) : (\r\n            <Drawer classes={{ paper: classes.drawerPaper }} variant='permanent' open>\r\n              <Sidebar setMobileOpen={setMobileOpen}></Sidebar>\r\n            </Drawer>\r\n          )}\r\n        </nav>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default NavBar"],"mappings":"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"},"metadata":{},"sourceType":"module"}